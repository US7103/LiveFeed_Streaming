{% extends "base.html" %}
{% block title %}Settings{% endblock %}

{% block content %}
<div style="background-color: #fffbea; padding: 2rem; border-radius: 15px; box-shadow: 0px 4px 10px rgba(0,0,0,0.1); max-width: 600px; margin: 2rem auto;">

  <h1 style="font-size: 2rem; font-weight: bold; margin-bottom: 1rem; color: #d99a00; text-align: center;">
    ⚙️ Settings
  </h1>

  <p style="color: #5a4b00; text-align: center; margin-bottom: 1.5rem;">
    Configure your dashboard settings here.
  </p>

  <form id="roi-form" style="display: flex; flex-direction: column; gap: 1rem;">
    <label for="roi-input" style="font-weight: bold; color: #8a6d00;">ROI Coordinates:</label>
    <input type="text" name="roi" id="roi-input" placeholder="e.g. 50,100,700,500" required
      style="padding: 0.5rem; border: 1px solid #d4c084; border-radius: 8px; background-color: #fffdf5;">

    <button type="submit"
      style="background-color: #d99a00; color: white; font-weight: bold; padding: 0.6rem; border: none; border-radius: 8px; cursor: pointer; transition: background 0.2s;">
      Save
    </button>
  </form>

  <p id="status" style="margin-top: 10px; color: green; font-weight: bold; text-align: center;"></p>

</div>

<script>
document.getElementById("roi-form").addEventListener("submit", function(e) {
    e.preventDefault();
    const roiValue = document.getElementById("roi-input").value;

    fetch("/update_roi", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ roi: roiValue })
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById("status").innerText = data.message;
    })
    .catch(err => {
        document.getElementById("status").innerText = "Error updating ROI.";
        console.error(err);
    });
});
</script>
{% endblock %}

